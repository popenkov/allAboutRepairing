"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".js-hamburger-btn"),t=document.querySelector(".js-hamburger-menu"),o=document.querySelector(".hamburger__back-btn-mobile");document.querySelector(".header__hamburger-btn-mobile.change");e.addEventListener("click",(function(){console.log("click"),t.classList.toggle("hamburger-show"),document.querySelector(".header-wrapper").classList.toggle("body__black-bg")})),o.addEventListener("click",(function(){console.log("click"),t.classList.remove("hamburger-show")})),function(e,t,o,n){var i=document.querySelectorAll(e),r=document.querySelector(o),s=document.querySelectorAll(n);function l(e){for(var t=e;t<s.length;t++)s[t].classList.remove("show"),s[t].classList.add("hide")}l(1),r.addEventListener("click",(function(o){var n,r=o.target;if(console.log(r,!!r.closest(e)),r.closest(t)||r.classList.contains(t))for(var c=0;c<i.length;c++)if(r==i[c]){console.log(i[c]),l(0),s[n=c].classList.contains("hide")&&(s[n].classList.remove("hide"),s[n].classList.add("show"));break}}))}(".hamburger__left-menu-item-link",".hamburger__left-menu-item",".hamburger__left-menu",".hamburger__right-menu-item");var n=document.querySelector(".header__location"),i=document.querySelector(".header__location-popup");n&&n.addEventListener("click",(function(e){e.preventDefault(),i.classList.toggle("header__location-popup--show")}));var r=document.querySelector(".header__hamburger-btn-mobile"),s=document.querySelector(".header__navigation-container"),l=document.querySelector("main"),c=document.querySelector("footer");document.querySelector("body");r&&r.addEventListener("click",(function(e){e.preventDefault(),r.classList.toggle("change"),s.classList.toggle("show"),document.querySelector(".header-wrapper").classList.toggle("body__black-bg"),l.classList.toggle("hide"),c.classList.toggle("hide"),t.classList.remove("hamburger-show")})),window.addEventListener("resize",(function(){d>=m&&(s.classList.remove("show"),r.classList.remove("change"),document.querySelector(".header-wrapper").classList.remove("body__black-bg"))}));new Swiper(".main__slider-swiper",{direction:"horizontal",loop:!0,navigation:{nextEl:".main__slider-button-next",prevEl:".main__slider-button-prev"}}),new Swiper(".pop-works__slider-swiper",{direction:"horizontal",loop:!0,slidesPerView:3,spaceBetween:24,navigation:{nextEl:".pop-works__slider-button-next",prevEl:".pop-works__slider-button-prev"},breakpoints:{700:{slidesPerView:1,spaceBetween:0},1150:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}}),new Swiper(".new-videos__slider-swiper",{direction:"horizontal",loop:!0,slidesPerView:4,spaceBetween:24,loopAdditionalSlides:3,navigation:{nextEl:".new-videos__slider-button-next",prevEl:".new-videos__slider-button-prev"},breakpoints:{600:{slidesPerView:1.36,spaceBetween:24},800:{slidesPerView:2,spaceBetween:24},1150:{slidesPerView:3,spaceBetween:24}}});var a,d=document.body.clientWidth,u=document.querySelector(".pop-articles__items-swiper"),p=document.querySelector(".pop-articles__items"),m=769,g=function(){console.log("sliderInit"),a=new Swiper(".pop-articles__items-swiper",{direction:"horizontal",loop:!0,slidesPerView:1.35,spaceBetween:20,loopAdditionalSlides:3,breakpoints:{620:{slidesPerView:1.35,spaceBetween:20},768:{slidesPerView:2,spaceBetween:24}}}),u.classList.remove("pop-articles--no-swiper")};d<m&&!u.classList.contains("swiper-container-initialized")&&g();window.addEventListener("resize",(function(){var e=document.body.clientWidth;console.log(e),e<m&&!u.classList.contains("swiper-container-initialized")?g():e>=m&&u.classList.contains("swiper-container-initialized")&&(console.log("swiperDestroy",a),a.destroy(!1,!0),u.classList.add("pop-articles--no-swiper"),p.removeAttribute("style"),p.childNodes.forEach((function(e){return e.removeAttribute("style")})),p.style=" ")}));var w=document.querySelectorAll(".popup-link"),h=document.querySelector("body"),v=document.querySelectorAll(".lock-padding"),_=!0;if(w.length>0)for(var f=function(e){var t=w[e];t.addEventListener("click",(function(e){var o=t.getAttribute("href").replace("#",""),n=document.getElementById(o);console.log(n),function(e){if(e&&_){var t=document.querySelector(".popup.open");t?q(t,!1):function(){var e=window.innerWidth-document.querySelector(".wrapper").clientWidth+"px";if(console.log(window.innerWidth),console.log(document.querySelector(".wrapper").offsetWidth),v.length>0)for(var t=0;t<v.length;t++){v[t].style.paddingRight=e}h.style.paddingRight=e,h.classList.add("lock"),_=!1,setTimeout((function(){_=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||q(e.target.closest(".popup"))}))}}(n),e.preventDefault()}))},y=0;y<w.length;y++)f(y);var b=document.querySelectorAll(".close-popup");if(b.length>0)for(var L=function(e){var t=b[e];t.addEventListener("click",(function(e){q(t.closest(".popup")),e.preventDefault()}))},S=0;S<b.length;S++)L(S);function q(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.querySelector("form")&&e.querySelector("form").reset(),_&&(e.classList.remove("open"),t&&k())}function k(){setTimeout((function(){if(v.length>0)for(var e=0;e<v.length;e++){v[e].style.paddingRight="0px"}h.style.paddingRight="0px",h.classList.remove("lock")}),800),_=!1,setTimeout((function(){_=!0}),800)}document.addEventListener("keydown",(function(e){27==e.which&&q(document.querySelector(".popup.open"))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW1idXJnZXJCYWNrQnRuIiwicXVlcnlTZWxlY3RvciIsImhhbWJlcmdlckNsb3NlQnRuIiwiY2F0YWxvZ0J1dHRvbiIsImNsYXNzTGlzdCIsImNvbnNvbGUiLCJsb2ciLCJoYW1idXJnZXJNZW51IiwidG9nZ2xlIiwicXVlcnlTZWxlY3RvckFsbCIsImhpZGVUYWJDb250ZW50IiwicmVtb3ZlIiwiYnV0dG9uIiwiYnV0dG9uQ29udGFpbmVyIiwiYnRuQ29udGFpbmVyIiwidGFiIiwidGFiQnV0dG9uIiwiYnV0dG9uc0NvbnRhaW5lciIsInRhYkNvbnRlbnQiLCJjb250YWlucyIsImFkZCIsImkiLCJhIiwibGVuZ3RoIiwiZXZ0IiwiYiIsInRhcmdldCIsImNsb3Nlc3QiLCJoZWFkZXJMb2NhdGlvbkxpbmsiLCJoZWFkZXJMb2NhdGlvblBvcHVwIiwic2hvd1RhYkNvbnRlbnQiLCJzaG93TWVudSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImhlYWRlckJ1dHRvbk1vYmlsZSIsIndpbmRvdyIsImNsaWVudFdpZHRoIiwiTUFYX01PQklMRV9XSURUSCIsIm1lbnVDb250YWluZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwicHJldkVsIiwicG9wV29ya3NTd2lwZXIiLCJTd2lwZXIiLCJmb290ZXIiLCJuZXdWaWRlb3NTd2lwZXIiLCJuZXh0RWwiLCJkaXJlY3Rpb24iLCJuYXZpZ2F0aW9uIiwiYnJlYWtwb2ludHMiLCJzd2lwZXJDb250YWluZXIiLCJzd2lwZXJXcmFwcGVyIiwicG9wQXJ0aWNsZXNTd2lwZXIiLCJsb29wIiwibG9vcEFkZGl0aW9uYWxTbGlkZXMiLCJzd2lwZXJEZXN0cm95IiwicmVtb3ZlQXR0cmlidXRlIiwiMTE1MCIsInNsaWRlckluaXQiLCJib2R5IiwicmVzaXplSGFuZGxlclNsaWRlciIsIjYyMCIsIjc2OCIsImN1cnJlbnRQb3B1cCIsInVubG9jayIsInRpbWVvdXQiLCJkZXN0cm95IiwiY2hpbGROb2RlcyIsImZvckVhY2giLCJpdGVtIiwic3R5bGUiLCJwb3B1cExpbmtzIiwibG9ja1BhZGRpbmciLCJwb3B1cEFjdGl2ZSIsIl9sb29wIiwicG9wdXBMaW5rIiwicG9wdXBOYW1lIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsImdldEVsZW1lbnRCeUlkIiwicG9wdXBDbG9zZSIsImxvY2tQYWRkaW5nVmFsdWUiLCJpbm5lcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJwYWRkaW5nUmlnaHQiLCJzZXRUaW1lb3V0IiwiYm9keUxvY2siLCJwb3B1cE9wZW4iLCJyZXNldCIsInBvcHVwQ2xvc2VJY29uIiwiX2xvb3AyIiwiZG9VbmxvY2siLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJib2R5VW5sb2NrIiwid2hpY2giXSwibWFwcGluZ3MiOiJhQUVBQSxTQUFTQyxpQkFBaUIsb0JBQW9CLFdBUXpDLElBQU1DLEVBQW1CRixTQUFTRyxjQUFjLHFCQUMxQ0MsRUFBb0JKLFNBQVNHLGNBQWMsc0JBRS9DRSxFQUFnQkEsU0FBY0osY0FBaUIsK0JBQ2hERCxTQUFBRyxjQUFBLHdDQUVTQSxFQUFjRixpQkFBbUJLLFNBQWlCLFdBQzNEQyxRQUFBQyxJQUFBLFNBSkRDLEVBQUFILFVBQUFJLE9BQUEsa0JBWUVSLFNBQUFBLGNBQW1CQSxtQkFBaUJELFVBQWlCUyxPQUFsQyxxQkFhRFYsRUFBU1csaUJBRjFCLFNBQUEsV0FWRkosUUFBUUMsSUFBSSxTQWNWQyxFQUFTRyxVQUFUQyxPQUE0QixxQkFQaEMsU0FBb0JDLEVBQVFDLEVBQWlCQyxFQUFjQyxHQUd2RCxJQUFJQyxFQUFZbEIsU0FBU1csaUJBQWlCRyxHQWUxQ0ssRUFBNEJuQixTQUFBRyxjQUFBYSxHQUNwQkksRUFBY2QsU0FBVWUsaUJBQTVCSixHQUVJRyxTQUFBQSxFQUF3QkUsR0FDM0IsSUFBQSxJQUFBQyxFQUFBQyxFQUFBRCxFQUFBSCxFQUFBSyxPQUFBRixJQUdMSCxFQUFB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R0FBQSxJQUFBa0IsSUFBQUMsVUFBQXJFLE9BQUEsUUFBQXNFLElBQUFELFVBQUEsS0FBQUEsVUFBQSxHQUNXbkIsRUFBWXhFLGNBQUEsU0FDVndFLEVBQVR4RSxjQUFBLFFBQUF1RixRQXZEQXhCLElBMkRDakUsRUFBaUJLLFVBQTFCTyxPQUFxQyxRQUM3QmdGLEdBQ01sQixLQXBCZCxTQUFTcUIsSUFDTFQsWUFBVyxXQUNQLEdBQUliLEVBQVlqRCxPQUFTLEVBQ3JCLElBQUssSUFBSUYsRUFBSSxFQUFHQSxFQUFJbUQsRUFBWWpELE9BQVFGLElBQUssQ0FDOUJtRCxFQUFZbkQsR0FDcEJpRCxNQUFNYyxhQUFlLE1BR2hDekIsRUFBS1csTUFBTWMsYUFBZSxNQUMxQnpCLEVBQUt2RCxVQUFVTyxPQUFPLFVBdkRvQixLQTBEOUNxRCxHQUFTLEVBQ1RxQixZQUFXLFdBQ1ByQixHQUFTLElBNURpQyxLQWdFbERsRSxTQUFTQyxpQkFBaUIsV0FBVyxTQUFVeUIsR0FDMUIsSUFBYkEsRUFBSXVFLE9BRUpmLEVBRG9CbEYsU0FBU0csY0FBYyIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLz09PT09PT18ICAgSU1QT1JUU1xyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBcclxuICAgIFx0Y29uc3QgY2F0YWxvZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1oYW1idXJnZXItYnRuJyk7XHJcbiAgICBcdGNvbnN0IGhhbWJ1cmdlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaGFtYnVyZ2VyLW1lbnUnKTtcclxuICAgIFx0Y29uc3QgaGFtYnVyZ2VyQmFja0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJnZXJfX2JhY2stYnRuLW1vYmlsZScpO1xyXG4gICAgXHRjb25zdCBoYW1iZXJnZXJDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2hhbWJ1cmdlci1idG4tbW9iaWxlLmNoYW5nZScpO1xyXG4gICAgXHRcclxuICAgIFx0ISFjYXRhbG9nQnV0dG9uICYgY2F0YWxvZ0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIFx0XHRjb25zb2xlLmxvZygnY2xpY2snKVxyXG4gICAgXHRcdGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnaGFtYnVyZ2VyLXNob3cnKTtcclxuICAgIFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLXdyYXBwZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdib2R5X19ibGFjay1iZycpO1xyXG4gICAgXHRcdC8qIGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnYm9keV9fYmxhY2stYmcnKTsgKi9cclxuICAgIFx0XHRcclxuICAgIFx0XHJcbiAgICBcdFxyXG4gICAgXHR9KTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcdFxyXG4gICAgXHQhIWhhbWJ1cmdlckJhY2tCdG4gJiBoYW1idXJnZXJCYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgXHRcdGNvbnNvbGUubG9nKCdjbGljaycpXHJcbiAgICBcdFx0aGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdoYW1idXJnZXItc2hvdycpO1xyXG4gICAgXHR9KTtcclxuICAgIFxyXG4gICAgXHRcclxuICAgIFxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiB0YWJNb2R1bGUgKGJ1dHRvbiwgYnV0dG9uQ29udGFpbmVyLCBidG5Db250YWluZXIsIHRhYikge1xyXG4gICAgXHJcbiAgICAgICAgLy/QvdGD0LbQvdC+INC90LDQudGC0Lgg0LrQvdC+0L/QutC4LCDQsdC70L7QuiDQutC+0L3RgtC10L3RgtCwINC4INCx0LvQvtC6IGMg0LrQvdC+0L/QutCw0LzQuFxyXG4gICAgICAgIGxldCB0YWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGJ1dHRvbiksXHJcbiAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ0bkNvbnRhaW5lciksXHJcbiAgICAgICAgICAgIHRhYkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRhYik7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBoaWRlVGFiQ29udGVudCAoYSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gYTsgaTwgdGFiQ29udGVudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGFiQ29udGVudFtpXS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICAgICB0YWJDb250ZW50W2ldLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8v0YHQutGA0YvQstCw0LXQvCDQstGB0LUg0YLQsNCx0YssINC60YDQvtC80LUg0L/QtdGA0LLQvtCz0L5cclxuICAgICAgICBoaWRlVGFiQ29udGVudCgxKTtcclxuICAgIFxyXG4gICAgICAgIC8v0L/QvtC60LDQtyDQvtC/0YDQtdC00LXQu9C10L3QvdC+0LPQviDRgtCw0LHQsFxyXG4gICAgICAgIGZ1bmN0aW9uIHNob3dUYWJDb250ZW50IChiKSB7XHJcbiAgICAgICAgICAgIGlmICh0YWJDb250ZW50W2JdLmNsYXNzTGlzdC5jb250YWlucygnaGlkZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJDb250ZW50W2JdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIHRhYkNvbnRlbnRbYl0uY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwXHJcbiAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcbiAgICBcdFx0Y29uc29sZS5sb2codGFyZ2V0LCAhIXRhcmdldC5jbG9zZXN0KGJ1dHRvbikpXHJcbiAgICAgICAgICAgIGlmKHRhcmdldC5jbG9zZXN0KGJ1dHRvbkNvbnRhaW5lcil8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGJ1dHRvbkNvbnRhaW5lcikpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpPHRhYkJ1dHRvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgPT0gdGFiQnV0dG9uW2ldKSB7XHJcbiAgICBcdFx0XHRcdFx0Y29uc29sZS5sb2codGFiQnV0dG9uW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlVGFiQ29udGVudCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1RhYkNvbnRlbnQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGFiTW9kdWxlKCcuaGFtYnVyZ2VyX19sZWZ0LW1lbnUtaXRlbS1saW5rJywgJy5oYW1idXJnZXJfX2xlZnQtbWVudS1pdGVtJywgJy5oYW1idXJnZXJfX2xlZnQtbWVudScsICcuaGFtYnVyZ2VyX19yaWdodC1tZW51LWl0ZW0nKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFx0Y29uc3QgaGVhZGVyTG9jYXRpb25MaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbG9jYXRpb24nKTtcclxuICAgIGNvbnN0IGhlYWRlckxvY2F0aW9uUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19sb2NhdGlvbi1wb3B1cCcpO1xyXG4gICAgXHJcbiAgICAhIWhlYWRlckxvY2F0aW9uTGluayAmJiBoZWFkZXJMb2NhdGlvbkxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBoZWFkZXJMb2NhdGlvblBvcHVwLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fbG9jYXRpb24tcG9wdXAtLXNob3cnKTtcclxuICAgIH0pXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGNvbnN0IGhlYWRlckJ1dHRvbk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2hhbWJ1cmdlci1idG4tbW9iaWxlJyk7XHJcbiAgICBjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbmF2aWdhdGlvbi1jb250YWluZXInKTtcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XHJcbiAgICBjb25zdCBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb290ZXInKTtcclxuICAgIGNvbnN0IHNpdGVCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgY29uc3QgdG9vZ2xlSGFtYnVyZ2VyPSgpID0+IHtcclxuICAgICAgICBoZWFkZXJCdXR0b25Nb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IHNob3dNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIG1lbnVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItd3JhcHBlcicpLmNsYXNzTGlzdC50b2dnbGUoJ2JvZHlfX2JsYWNrLWJnJyk7XHJcbiAgICAgICAvKiAgc2l0ZUJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYm9keV9fYmxhY2stYmcnKTsgKi9cclxuICAgICAgIG1haW4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZScpO1xyXG4gICAgICAgZm9vdGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAhIWhlYWRlckJ1dHRvbk1vYmlsZSAmJiBoZWFkZXJCdXR0b25Nb2JpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0b29nbGVIYW1idXJnZXIoKTtcclxuICAgICAgICBzaG93TWVudSgpO1xyXG4gICAgXHJcbiAgICBcdGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnaGFtYnVyZ2VyLXNob3cnKTtcclxuICAgIFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgXHRpZiAoY2xpZW50V2lkdGggPj0gTUFYX01PQklMRV9XSURUSCkge1xyXG4gICAgXHRcdG1lbnVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgXHRcdGhlYWRlckJ1dHRvbk1vYmlsZS5jbGFzc0xpc3QucmVtb3ZlKFwiY2hhbmdlXCIpO1xyXG4gICAgXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItd3JhcHBlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHlfX2JsYWNrLWJnJyk7XHJcbiAgICBcdH1cclxuICAgIH0pXHJcbiAgICBjb25zdCBtYWluU2xpZGVyc3dpcGVyID0gbmV3IFN3aXBlcignLm1haW5fX3NsaWRlci1zd2lwZXInLCB7XHJcbiAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICBuZXh0RWw6ICcubWFpbl9fc2xpZGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgIHByZXZFbDogJy5tYWluX19zbGlkZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIFxyXG4gICAgICB9KTtcclxuICAgIGNvbnN0IHBvcFdvcmtzU3dpcGVyID0gbmV3IFN3aXBlcignLnBvcC13b3Jrc19fc2xpZGVyLXN3aXBlcicsIHtcclxuICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgIFxyXG4gICAgICAgIC8vIERlZmF1bHQgcGFyYW1ldGVyc1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNCxcclxuICAgICAgIFxyXG4gICAgICBcclxuICAgIFxyXG4gICAgICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgbmV4dEVsOiAnLnBvcC13b3Jrc19fc2xpZGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgIHByZXZFbDogJy5wb3Atd29ya3NfX3NsaWRlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAvLyB3aGVuIHdpbmRvdyB3aWR0aCBpcyA+PSA0MTR4XHJcbiAgICAgICAgICA3MDA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzID49IDQ4MHB4XHJcbiAgICAgICAgICAxMTUwOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgIDE0NDA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNCxcclxuICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIH0pO1xyXG4gICAgY29uc3QgbmV3VmlkZW9zU3dpcGVyID0gbmV3IFN3aXBlcignLm5ldy12aWRlb3NfX3NsaWRlci1zd2lwZXInLCB7XHJcbiAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDI0LFxyXG4gICAgICAgIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxyXG4gICAgICBcclxuICAgIFxyXG4gICAgICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgbmV4dEVsOiAnLm5ldy12aWRlb3NfX3NsaWRlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICBwcmV2RWw6ICcubmV3LXZpZGVvc19fc2xpZGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgLy8gd2hlbiB3aW5kb3cgd2lkdGggaXMgPj0gNDE0XHJcbiAgICAgICAgICA2MDA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS4zNixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNFxyXG4gICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgODAwOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjRcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAvLyB3aGVuIHdpbmRvdyB3aWR0aCBpcyA+PSAxMDAwXHJcbiAgICAgICAgICAxMTUwOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjRcclxuICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB9KTtcclxuICAgIGxldCB7IGNsaWVudFdpZHRoIH0gPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgY29uc3Qgc3dpcGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcC1hcnRpY2xlc19faXRlbXMtc3dpcGVyJyk7XHJcbiAgICBjb25zdCBzd2lwZXJXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcC1hcnRpY2xlc19faXRlbXMnKTtcclxuICAgIGxldCBwb3BBcnRpY2xlc1N3aXBlcjtcclxuICAgIGNvbnN0IE1BWF9NT0JJTEVfV0lEVEggPSA3Njk7XHJcbiAgICBcclxuICAgIGNvbnN0IHNsaWRlckluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NsaWRlckluaXQnKVxyXG4gICAgICAgIHBvcEFydGljbGVzU3dpcGVyICA9IG5ldyBTd2lwZXIoJy5wb3AtYXJ0aWNsZXNfX2l0ZW1zLXN3aXBlcicsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS4zNSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXHJcbiAgICBcclxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzID49IDQxNHhcclxuICAgICAgICAgICAgICAgIDYyMDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEuMzUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHdpbmRvdyB3aWR0aCBpcyA+PSA0ODBweFxyXG4gICAgICAgICAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjQsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgIFxyXG4gICAgICBzd2lwZXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgncG9wLWFydGljbGVzLS1uby1zd2lwZXInKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgc3dpcGVyRGVzdHJveSA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnc3dpcGVyRGVzdHJveScsIHBvcEFydGljbGVzU3dpcGVyKVxyXG4gICAgICAgIHBvcEFydGljbGVzU3dpcGVyLmRlc3Ryb3koZmFsc2UsIHRydWUpO1xyXG4gICAgXHJcbiAgICAgICAgc3dpcGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3BvcC1hcnRpY2xlcy0tbm8tc3dpcGVyJyk7XHJcbiAgICAgICAgLyogc3dpcGVyV3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7JzsgKi9cclxuICAgICAgICBzd2lwZXJXcmFwcGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICBzd2lwZXJXcmFwcGVyLmNoaWxkTm9kZXMuZm9yRWFjaChpdGVtID0+IGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpKVxyXG4gICAgICAgIHN3aXBlcldyYXBwZXIuc3R5bGUgPSAnICc7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKGNsaWVudFdpZHRoPCBNQVhfTU9CSUxFX1dJRFRIICYmICFzd2lwZXJDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItY29udGFpbmVyLWluaXRpYWxpemVkJykpIHtcclxuICAgICAgICBzbGlkZXJJbml0KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc2l6ZUhhbmRsZXJTbGlkZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHsgY2xpZW50V2lkdGggfSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2xpZW50V2lkdGgpO1xyXG4gICAgICAgIGlmIChjbGllbnRXaWR0aDwgTUFYX01PQklMRV9XSURUSCAmJiAhc3dpcGVyQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc3dpcGVyLWNvbnRhaW5lci1pbml0aWFsaXplZCcpKSB7XHJcbiAgICAgICAgICAgIHNsaWRlckluaXQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNsaWVudFdpZHRoID49IE1BWF9NT0JJTEVfV0lEVEggJiYgc3dpcGVyQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc3dpcGVyLWNvbnRhaW5lci1pbml0aWFsaXplZCcpKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgc3dpcGVyRGVzdHJveSgpOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyU2xpZGVyKTtcclxuICAgIC8qIGNvbnN0IGhlYWRlckxvY2F0aW9uTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvY2F0aW9uJyk7XHJcbiAgICBjb25zdCBoZWFkZXJMb2NhdGlvblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbG9jYXRpb24tcG9wdXAnKTtcclxuICAgIFxyXG4gICAgISFoZWFkZXJMb2NhdGlvbkxpbmsgJiYgaGVhZGVyTG9jYXRpb25MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaGVhZGVyTG9jYXRpb25Qb3B1cC5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2xvY2F0aW9uLXBvcHVwLS1zaG93Jyk7XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBjb25zdCBoZWFkZXJCdXR0b25Nb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19oYW1idXJnZXItYnRuLW1vYmlsZScpO1xyXG4gICAgY29uc3QgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX25hdmlnYXRpb24tY29udGFpbmVyJyk7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xyXG4gICAgY29uc3Qgc2l0ZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBjb25zdCB0b29nbGVIYW1idXJnZXI9KCkgPT4ge1xyXG4gICAgICAgIGhlYWRlckJ1dHRvbk1vYmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhbmdlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3Qgc2hvd01lbnUgPSAoKSA9PiB7XHJcbiAgICAgICAgbWVudUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgISFoZWFkZXJCdXR0b25Nb2JpbGUgJiYgaGVhZGVyQnV0dG9uTW9iaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdG9vZ2xlSGFtYnVyZ2VyKCk7XHJcbiAgICAgICAgc2hvd01lbnUoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgICovXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHBvcHVwTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWxpbmtcIik7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xyXG4gICAgICAgIGNvbnN0IGxvY2tQYWRkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sb2NrLXBhZGRpbmdcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHVubG9jayA9IHRydWU7IC8v0YfRgtC+0LHRiyDQvdC1INCx0YvQu9C+INC00LLQvtC50L3Ri9GFINC90LDQttCw0YLQuNC5XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGltZW91dCA9IDgwMDsgLy8g0KLQsNC50LzQsNGD0YIg0YHRgtC+0LjRgiDRgtCw0LrQvtC5INC20LUg0LrQsNC6INGDINCw0L3QuNC80LDRhtC40Lgg0LIg0YHQuNGN0YHRjdGBLiDQrdGC0L4g0YHQstGP0LfQsNC90L4g0YEg0LHQu9C+0LrQuNGA0L7QstC60L7QuSDRgdGC0YDQvtC40LvQsCDQuCDQtdCz0L4g0LDQtNC10LrQstCw0YLQvdC+0Lkg0YDQsNCx0L7RgtC1XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHBvcHVwTGlua3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcHVwTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwTGluayA9IHBvcHVwTGlua3NbaV07XHJcbiAgICAgICAgICAgICAgICBwb3B1cExpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3B1cE5hbWUgPSBwb3B1cExpbmsuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKS5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3B1cE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRQb3B1cClcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cE9wZW4oY3VycmVudFBvcHVwKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcG9wdXBDbG9zZUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb3NlLXBvcHVwXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwb3B1cENsb3NlSWNvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9wdXBDbG9zZUljb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gcG9wdXBDbG9zZUljb25baV07XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UoZWwuY2xvc2VzdChcIi5wb3B1cFwiKSk7IC8vINCa0LvQvtC30LXRgdGCIC0g0Y3RgtC+INCx0LvQuNC20LDQudGI0LjQuSDRgNC+0LTQuNGC0LXQu9GMINGB0YHRi9C70LrQuCDRgSDQutC70LDRgdGB0L7QvCDQv9C+0L/QsNC/LiDQotC+INC10YHRgtGMINCx0YPQtNC10YIg0LfQsNC60YDRi9GCINC/0L7Qv9Cw0L8g0YDRj9C00L7QvCDRgSDQutC70LjQutC90YPRgtC+0Lkg0YHRgdGL0LvQutC+0LksINCwINC90LUg0LrQsNC60L7RhtGC0L4g0LTRgNGD0LPQvtC5LiDQntGCINGB0YHRi9C70LrQuCDRgdC+0LHRi9GC0LjQtSDQstGB0L/Qu9GL0LLRkdGCINC4INGB0YDQsNCx0L7RgtCw0LXRgiDQvdCwINGA0L7QtNC40YLQtdC70LUg0YEg0LrQu9Cw0YHRgdC+0Lwg0L/QvtC/0LDQv1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvL9GE0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y9cclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBwb3B1cE9wZW4oY3VycmVudFBvcHVwKSB7XHJcbiAgICAgICAgICAgIC8v0JLQvdCw0YfQsNC70LUg0L/RgNC+0LLQtdGA0LrQsCDQvdCwINGD0LbQtSDQvtGC0LrRgNGL0YLRi9C1INC/0L7Qv9Cw0L/Riywg0YfRgtC+0LHRiyDQt9Cw0LrRgNGL0YLRjCDQuNGFXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9wdXAgJiYgdW5sb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb3B1cEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAub3BlblwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChwb3B1cEFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UocG9wdXBBY3RpdmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keUxvY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3B1cC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8v0LfQsNC60YDRi9GC0LjQtSDQv9C+INC60LvQuNC60YMg0LLQvdC1INC+0LHQu9Cw0YHRgtC4INC60L7QvdGC0LXQvdGC0LBcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZ0LnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwX19jb250ZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UoZXZ0LnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAvL9Ck0KPQndCa0KbQmNCvINCX0JDQmtCg0KvQotCY0K9cclxuICAgICAgICAvL9CSINC30LDQutGA0YvRgtC40Lgg0LzRiyDQvNC+0LbQtdC8INC/0LXRgNC10LTQsNGC0Ywg0YTQvtC70YEg0LTQu9GPINCx0LvQvtC60LjRgNC+0LLQutC4INCx0L7QtNC4LCDQutC+0LPQtNCwINC80Ysg0L7RgtC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L8g0LIg0L/QvtC/0LDQv9C1XHJcbiAgICAgICAgZnVuY3Rpb24gcG9wdXBDbG9zZShwb3B1cEFjdGl2ZSwgZG9VbmxvY2sgPSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChwb3B1cEFjdGl2ZS5xdWVyeVNlbGVjdG9yKCdmb3JtJykpIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwQWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXNldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIHBvcHVwQWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXNldCgpOyAqL1xyXG4gICAgICAgICAgICBpZiAodW5sb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChkb1VubG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlVbmxvY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBib2R5TG9jaygpIHtcclxuICAgICAgICAgICAgLy/QktC90LDRh9Cw0LvQtSDRg9Cx0LjRgNCw0LXRgiDQv9GA0YvQs9Cw0Y7RidC40Lkg0YHQutGA0L7Qu9C7IHdyYXBwZXIg4oCTINGN0YLQviDQtNC40LIg0LLQvdGD0YLRgNC4INCx0L7QtNC4XHJcbiAgICAgICAgICAgIC8qIGNvbnN0IGxvY2tQYWRkaW5nVmFsdWUgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlclwiKS5vZmZzZXRXaWR0aCArIFwicHhcIjsgKi9cclxuICAgICAgICAgICAgY29uc3QgbG9ja1BhZGRpbmdWYWx1ZSA9IHdpbmRvdy5pbm5lcldpZHRoIC0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cmFwcGVyXCIpLmNsaWVudFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cuaW5uZXJXaWR0aCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlclwiKS5vZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8v0JvQvtC6INC/0Y3QtNC00LjQvdCzINC00L7QsdCw0LLQu9GP0LXRgiDQvtCx0YrQtdC60YLQsNC8INGBINC/0L7Qt9C40YjQvSDRhNC40LrRgdC0LiDQndCw0L/RgNC40LzQtdGAINGF0Y3QtNGN0YAg0YLQsNC60L7QuS4g0J7QvSDRgdCy0LjQtNCz0LDQtdGC0YHRjy4g0JXQvNGDINC90LDQtNC+INGB0YLQuNC70Ywg0L/QvtC00L/RgNCw0LLQuNGC0YwuXHJcbiAgICAgICAgICAgIGlmIChsb2NrUGFkZGluZy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2tQYWRkaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBsb2NrUGFkZGluZ1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBsb2NrUGFkZGluZ1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gbG9ja1BhZGRpbmdWYWx1ZTtcclxuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKFwibG9ja1wiKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgLy/QntC9INC70L7Rh9C40YIg0L3QsCDQstGA0LXQvNGPINGC0LDQudC80LDRg9GC0LAsINC/0L7RgtC+0LzRgyDRh9GC0L4g0L7QutC90L4g0LfQsNC60YDRi9Cy0LDQtdGC0YHRjyA4MDAg0LzRgS4g0Jgg0YfRgtC+0LHRiyDQstC+INCy0YDQtdC80Y8g0LfQsNC60YDRi9GC0LjRjyDQvdC1INC+0YLQutGA0YvRgtGMINCx0YvQu9C+INC+0LrQvdC+INGB0L3QvtCy0LBcclxuICAgICAgICAgICAgdW5sb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdW5sb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8v0L3QtSDQtNC+INC60L7QvdGG0LBcclxuICAgICAgICBmdW5jdGlvbiBib2R5VW5sb2NrKCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsb2NrUGFkZGluZy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NrUGFkZGluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGxvY2tQYWRkaW5nW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9jaycpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdW5sb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdW5sb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgdGltZW91dClcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2dC53aGljaCA9PSAyNykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9wdXBBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLm9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBwb3B1cENsb3NlKHBvcHVwQWN0aXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcblxyXG59KTsiXX0=
