"use strict";function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".js-hamburger-btn"),t=document.querySelector(".js-hamburger-menu");e.addEventListener("click",(function(){var e;t.classList.toggle("hamburger-show");var o=new Swiper(".hamburger__left-menu",(_defineProperty(e={direction:"vertical",slidesPerView:1},"slidesPerView","auto"),_defineProperty(e,"allowTouchMove",!1),_defineProperty(e,"loop",!1),_defineProperty(e,"slideActiveClass","swiper-slide-active"),_defineProperty(e,"scrollbar",{el:".swiper-scrollbar",draggable:!0,hide:!0}),e)),r=document.querySelectorAll(".hamburger__left-menu .swiper-wrapper .swiper-slide");o.on("click",(function(e){r.forEach((function(e){e.classList.remove("swiper-slide-active")})),e.target.classList.add("swiper-slide-active")}));new Swiper(".hamburger__right-menu",{slidesPerView:1,spaceBetween:50,direction:"vertical",allowTouchMove:!1,loop:!1,thumbs:{swiper:o}})}));new Swiper(".main__slider-swiper",{direction:"horizontal",loop:!0,navigation:{nextEl:".main__slider-button-next",prevEl:".main__slider-button-prev"}}),new Swiper(".pop-works__slider-swiper",{direction:"horizontal",loop:!0,slidesPerView:3,spaceBetween:24,navigation:{nextEl:".pop-works__slider-button-next",prevEl:".pop-works__slider-button-prev"},breakpoints:{700:{slidesPerView:1,spaceBetween:0},1150:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}}),new Swiper(".new-videos__slider-swiper",{direction:"horizontal",loop:!0,slidesPerView:4,spaceBetween:24,navigation:{nextEl:".new-videos__slider-button-next",prevEl:".new-videos__slider-button-prev"},breakpoints:{600:{slidesPerView:1.36,spaceBetween:24},800:{slidesPerView:2,spaceBetween:24},1150:{slidesPerView:3,spaceBetween:24}}});var o,r=document.body.clientWidth,i=document.querySelector(".pop-articles__items-swiper"),n=function(){console.log("sliderInit"),o=new Swiper(".pop-articles__items-swiper",{direction:"horizontal",loop:!0,slidesPerView:1.35,spaceBetween:20}),i.classList.remove("pop-articles--no-swiper")};r<769&&n();window.addEventListener("resize",(function(){var e=document.body.clientWidth;console.log(e),e<769?n():e>=769&&i.classList.contains("swiper-container-initialized")&&(console.log("swiperDestroy"),o.destroy(!0,!0),i.classList.add("pop-articles--no-swiper"))})),console.log(r);var l=document.querySelector(".header__location"),s=document.querySelector(".header__location-popup");l&&l.addEventListener("click",(function(e){e.preventDefault(),s.classList.toggle("header__location-popup--show")}));var c=document.querySelector(".header__hamburger-btn-mobile"),a=document.querySelector(".header__navigation-container");document.querySelector("main"),document.querySelector("body");c&&c.addEventListener("click",(function(e){e.preventDefault(),c.classList.toggle("change"),a.classList.toggle("show")}));var d=document.querySelectorAll(".popup-link"),p=document.querySelector("body"),u=document.querySelectorAll(".lock-padding"),w=!0;if(d.length>0)for(var v=function(e){var t=d[e];t.addEventListener("click",(function(e){var o=t.getAttribute("href").replace("#",""),r=document.getElementById(o);console.log(r),function(e){if(e&&w){var t=document.querySelector(".popup.open");t?_(t,!1):function(){var e=window.innerWidth-document.querySelector(".wrapper").clientWidth+"px";if(console.log(window.innerWidth),console.log(document.querySelector(".wrapper").offsetWidth),u.length>0)for(var t=0;t<u.length;t++){u[t].style.paddingRight=e}p.style.paddingRight=e,p.classList.add("lock"),w=!1,setTimeout((function(){w=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||_(e.target.closest(".popup"))}))}}(r),e.preventDefault()}))},g=0;g<d.length;g++)v(g);var m=document.querySelectorAll(".close-popup");if(m.length>0)for(var f=function(e){var t=m[e];t.addEventListener("click",(function(e){_(t.closest(".popup")),e.preventDefault()}))},h=0;h<m.length;h++)f(h);function _(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.querySelector("form")&&e.querySelector("form").reset(),w&&(e.classList.remove("open"),t&&y())}function y(){setTimeout((function(){if(u.length>0)for(var e=0;e<u.length;e++){u[e].style.paddingRight="0px"}p.style.paddingRight="0px",p.classList.remove("lock")}),800),w=!1,setTimeout((function(){w=!0}),800)}document.addEventListener("keydown",(function(e){27==e.which&&_(document.querySelector(".popup.open"))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYXRhbG9nQnV0dG9uIiwiaGFtYnVyZ2VyTWVudSIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJfU3dpcGVyIiwibGVmdE1lbnVTd2lwZXIiLCJTd2lwZXIiLCJfZGVmaW5lUHJvcGVydHkiLCJlbCIsImRyYWdnYWJsZSIsInRhcmdldCIsImhpZGUiLCJzd2lwZXIiLCJvbiIsImUiLCJsZWZ0U3dpcGVyU2xpZGVzIiwiZm9yRWFjaCIsIml0ZW0iLCJyZW1vdmUiLCJhZGQiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwiYWxsb3dUb3VjaE1vdmUiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwiZGlyZWN0aW9uIiwiNzAwIiwiMTE1MCIsIk1BWF9NT0JJTEVfV0lEVEgiLCJzbGlkZXJJbml0Iiwic3dpcGVyQ29udGFpbmVyIiwiYnJlYWtwb2ludHMiLCJjbGllbnRXaWR0aCIsImxvZyIsIjgwMCIsInN3aXBlckRlc3Ryb3kiLCJoZWFkZXJMb2NhdGlvbkxpbmsiLCJtYWluIiwiaGVhZGVyQnV0dG9uTW9iaWxlIiwiYm9keSIsIm1lbnVDb250YWluZXIiLCJ0b29nbGVIYW1idXJnZXIiLCJwb3BBcnRpY2xlc1N3aXBlciIsInNob3dNZW51IiwidGltZW91dCIsIndpbmRvdyIsInBvcHVwTGluayIsImNvbnNvbGUiLCJwb3B1cE5hbWUiLCJjdXJyZW50UG9wdXAiLCJjb250YWlucyIsInBvcHVwTGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwicG9wdXBDbG9zZUljb24iLCJoZWFkZXJMb2NhdGlvblBvcHVwIiwiZXZ0IiwicG9wdXBDbG9zZSIsInRvZ2dsZSIsImNsb3Nlc3QiLCJib2R5TG9jayIsImxvY2tQYWRkaW5nIiwidW5sb2NrIiwibGVuZ3RoIiwiX2xvb3AiLCJpIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsImdldEVsZW1lbnRCeUlkIiwibG9ja1BhZGRpbmdWYWx1ZSIsInNldFRpbWVvdXQiLCJwYWRkaW5nUmlnaHQiLCJwb3B1cEFjdGl2ZSIsImlubmVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsInN0eWxlIiwicHJldmVudERlZmF1bHQiLCJfbG9vcDIiLCJkb1VubG9jayIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInJlc2V0IiwiYm9keVVubG9jayIsIndoaWNoIl0sIm1hcHBpbmdzIjoibUpBRUFBLFNBQVNDLGlCQUFpQixvQkFBb0IsV0FXdkNDLElBQUFBLEVBQWdCQSxTQUFjRCxjQUFkLHFCQUE4Q0UsRUFBQUgsU0FBQUksY0FBQSxzQkFDakRDLEVBQWlCSixpQkFBL0IsU0FBQSxXQUFBLElBQUFLLEVBR0FILEVBQU1JLFVBQXFCQyxPQUFPLGtCQUFYLElBQUFELEVBQUEsSUFBQUMsT0FBQSx5QkFBQUMsZ0JBQUFILEVBQUEsQ0FZckJJLFVBQUksV0FDSkMsY0FGWSxHQVhTLGdCQWNmLFFBZGVGLGdCQUFBSCxFQUFBLGtCQUF2QixHQUF1QkcsZ0JBQUFILEVBQUEsUUFxQnRCLEdBckJzQkcsZ0JBQUFILEVBQUEsbUJBTUgsdUJBTkdHLGdCQUFBSCxFQUFBLFlBd0J0QixDQUdDSSxHQUFJRSxvQkFDSkEsV0FBT1AsRUFMUlEsTUFBQSxJQXZCc0JQLElBOENyQlEsRUFBUVAsU0FBQUEsaUJBQUFBLHVEQURBQSxFQUFBUSxHQUFBLFNBQUEsU0FBQUMsR0FQVEMsRUFBQUMsU0FBQSxTQUFBQyxHQTFDRkEsRUFBQWQsVUFBQWUsT0FBQSwwQkEwREdKLEVBQUFKLE9BQ1dQLFVBQUFnQixJQUY2QywwQkFhRyxJQUFBYixPQUFBLHlCQUFBLENBSzNEYyxjQUFBLEVBQ0FBLGFBTjJELEdBTzNEQyxVQVAyRCxXQVczREMsZ0JBQUEsRUFDQUMsTUFBVSxFQUNSQyxPQUFRLENBQ1JDLE9BQVFwQixRQUdHLElBQUFDLE9BQUEsdUJBQUEsQ0FPWG9CLFVBQU0sYUFDSk4sTUFBQUEsRUFNQUEsV0FBQUEsQ0FDQUMsT0FBQUEsNEJBRklJ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QUFZRSxPQUFRRSxJQUFLLENBQzlCSixFQUFZSSxHQUNwQlUsTUFBTUosYUFBZSxNQUdoQy9CLEVBQUttQyxNQUFNSixhQUFlLE1BQzFCL0IsRUFBS3JDLFVBQVVlLE9BQU8sVUEvQ1IsS0FrRGxCNEMsR0FBUyxFQUNUUSxZQUFXLFdBQ1BSLEdBQVMsSUFwREssS0F3RHRCaEUsU0FBU0MsaUJBQWlCLFdBQVcsU0FBVXlELEdBQzFCLElBQWJBLEVBQUkyQixPQUVKMUIsRUFEb0IzRCxTQUFTSSxjQUFjIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vPT09PT09PXwgICBJTVBPUlRTXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFx0Y29uc3QgY2F0YWxvZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1oYW1idXJnZXItYnRuJyk7XHJcbiAgICBcdGNvbnN0IGhhbWJ1cmdlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaGFtYnVyZ2VyLW1lbnUnKTtcclxuICAgIFx0XHJcbiAgICBcdCEhY2F0YWxvZ0J1dHRvbiAmIGNhdGFsb2dCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBcdFx0aGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdoYW1idXJnZXItc2hvdycpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFx0XHRjb25zdCBsZWZ0TWVudVN3aXBlciA9IG5ldyBTd2lwZXIoJy5oYW1idXJnZXJfX2xlZnQtbWVudScsIHtcclxuICAgIFx0XHRcdGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgIFx0XHRcdHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBcdFx0ICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgXHRcdCAgIGFsbG93VG91Y2hNb3ZlOiBmYWxzZSxcclxuICAgIFx0XHQgIGxvb3A6IGZhbHNlLFxyXG4gICAgXHRcdCAgc2xpZGVBY3RpdmVDbGFzczogJ3N3aXBlci1zbGlkZS1hY3RpdmUnLFxyXG4gICAgXHRcdCAgIFxyXG4gICAgXHRcdC8qICAgIHdhdGNoU2xpZGVzVmlzaWJpbGl0eTogdHJ1ZSxcclxuICAgIFx0XHQgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLCAqL1xyXG4gICAgXHQgXHJcbiAgICBcdFx0ICAgc2Nyb2xsYmFyOiB7XHJcbiAgICBcdFx0XHQgZWw6ICcuc3dpcGVyLXNjcm9sbGJhcicsXHJcbiAgICBcdFx0XHQgZHJhZ2dhYmxlOiB0cnVlLFxyXG4gICAgXHRcdFx0IGhpZGU6IHRydWUsXHJcbiAgICBcdFx0ICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICBcdFx0ICAgXHJcbiAgICBcdFx0IH0pO1xyXG4gICAgXHJcbiAgICBcdFx0IC8qINC+0YLQvNC10YfQsNGOINCw0LrRgtC40LLQvdGL0Lkg0YHQu9Cw0LnQtCAqL1xyXG4gICAgXHRcdCBjb25zdCBsZWZ0U3dpcGVyU2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhhbWJ1cmdlcl9fbGVmdC1tZW51IC5zd2lwZXItd3JhcHBlciAuc3dpcGVyLXNsaWRlJyk7XHJcbiAgICBcdFx0IGxlZnRNZW51U3dpcGVyLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBcdFx0XHRsZWZ0U3dpcGVyU2xpZGVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICBcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc3dpcGVyLXNsaWRlLWFjdGl2ZScpO1xyXG4gICAgXHRcdFx0fSlcclxuICAgIFx0XHRcdCBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICBcdFx0XHQgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1zbGlkZS1hY3RpdmUnKVxyXG4gICAgXHRcdCAgfSk7XHJcbiAgICBcclxuICAgIFx0XHQgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcdFx0IFxyXG4gICAgXHQgXHJcbiAgICBcdFx0IGNvbnN0IHJpZ2h0TWVudVN3aXBlciA9IG5ldyBTd2lwZXIoJy5oYW1idXJnZXJfX3JpZ2h0LW1lbnUnLCB7XHJcbiAgICBcdFx0ICAgXHJcbiAgICBcdFx0ICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIFx0XHQgICBzcGFjZUJldHdlZW46IDUwLFxyXG4gICAgXHRcdCAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgIFx0XHQgICBhbGxvd1RvdWNoTW92ZTogZmFsc2UsXHJcbiAgICBcdFx0XHQgbG9vcDogZmFsc2UsXHJcbiAgICBcdFx0XHQgdGh1bWJzOiB7XHJcbiAgICBcdFx0XHQgc3dpcGVyOiBsZWZ0TWVudVN3aXBlcixcclxuICAgIFx0XHRcdCB9LFxyXG4gICAgXHQgXHJcbiAgICBcdCBcclxuICAgIFx0IFxyXG4gICAgXHRcdCB9KTtcclxuICAgIFx0fSlcclxuICAgIGNvbnN0IG1haW5TbGlkZXJzd2lwZXIgPSBuZXcgU3dpcGVyKCcubWFpbl9fc2xpZGVyLXN3aXBlcicsIHtcclxuICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgXHJcbiAgICBcclxuICAgICAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgIG5leHRFbDogJy5tYWluX19zbGlkZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgcHJldkVsOiAnLm1haW5fX3NsaWRlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIH0pO1xyXG4gICAgY29uc3QgcG9wV29ya3NTd2lwZXIgPSBuZXcgU3dpcGVyKCcucG9wLXdvcmtzX19zbGlkZXItc3dpcGVyJywge1xyXG4gICAgICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnNcclxuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgXHJcbiAgICAgICAgLy8gRGVmYXVsdCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDI0LFxyXG4gICAgICAgXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICBuZXh0RWw6ICcucG9wLXdvcmtzX19zbGlkZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgcHJldkVsOiAnLnBvcC13b3Jrc19fc2xpZGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzID49IDQxNHhcclxuICAgICAgICAgIDcwMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgLy8gd2hlbiB3aW5kb3cgd2lkdGggaXMgPj0gNDgwcHhcclxuICAgICAgICAgIDExNTA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNCxcclxuICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgMTQ0MDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDI0LFxyXG4gICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgfSk7XHJcbiAgICBjb25zdCBuZXdWaWRlb3NTd2lwZXIgPSBuZXcgU3dpcGVyKCcubmV3LXZpZGVvc19fc2xpZGVyLXN3aXBlcicsIHtcclxuICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjQsXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICBuZXh0RWw6ICcubmV3LXZpZGVvc19fc2xpZGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgIHByZXZFbDogJy5uZXctdmlkZW9zX19zbGlkZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAvLyB3aGVuIHdpbmRvdyB3aWR0aCBpcyA+PSA0MTRcclxuICAgICAgICAgIDYwMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLjM2LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDI0XHJcbiAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICA4MDA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzID49IDEwMDBcclxuICAgICAgICAgIDExNTA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNFxyXG4gICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIH0pO1xyXG4gICAgbGV0IHsgY2xpZW50V2lkdGggfSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICBjb25zdCBzd2lwZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wLWFydGljbGVzX19pdGVtcy1zd2lwZXInKTtcclxuICAgIGxldCBwb3BBcnRpY2xlc1N3aXBlcjtcclxuICAgIGNvbnN0IE1BWF9NT0JJTEVfV0lEVEggPSA3Njk7XHJcbiAgICBcclxuICAgIGNvbnN0IHNsaWRlckluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NsaWRlckluaXQnKVxyXG4gICAgICAgIHBvcEFydGljbGVzU3dpcGVyICA9IG5ldyBTd2lwZXIoJy5wb3AtYXJ0aWNsZXNfX2l0ZW1zLXN3aXBlcicsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS4zNSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgIFxyXG4gICAgICBcclxuICAgICAgXHJcbiAgICBcclxuICAgICAgc3dpcGVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcC1hcnRpY2xlcy0tbm8tc3dpcGVyJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHN3aXBlckRlc3Ryb3kgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3N3aXBlckRlc3Ryb3knKVxyXG4gICAgICAgIHBvcEFydGljbGVzU3dpcGVyLmRlc3Ryb3kodHJ1ZSwgdHJ1ZSlcclxuICAgICAgICBzd2lwZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncG9wLWFydGljbGVzLS1uby1zd2lwZXInKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoY2xpZW50V2lkdGg8IE1BWF9NT0JJTEVfV0lEVEgpIHtcclxuICAgICAgICBzbGlkZXJJbml0KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc2l6ZUhhbmRsZXJTbGlkZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHsgY2xpZW50V2lkdGggfSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2xpZW50V2lkdGgpO1xyXG4gICAgICAgIGlmIChjbGllbnRXaWR0aDwgTUFYX01PQklMRV9XSURUSCkge1xyXG4gICAgICAgICAgICBzbGlkZXJJbml0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjbGllbnRXaWR0aCA+PSBNQVhfTU9CSUxFX1dJRFRIICYmIHN3aXBlckNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1jb250YWluZXItaW5pdGlhbGl6ZWQnKSkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHN3aXBlckRlc3Ryb3koKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlclNsaWRlcik7XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGNsaWVudFdpZHRoKTtcclxuICAgIGNvbnN0IGhlYWRlckxvY2F0aW9uTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvY2F0aW9uJyk7XHJcbiAgICBjb25zdCBoZWFkZXJMb2NhdGlvblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbG9jYXRpb24tcG9wdXAnKTtcclxuICAgIFxyXG4gICAgISFoZWFkZXJMb2NhdGlvbkxpbmsgJiYgaGVhZGVyTG9jYXRpb25MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaGVhZGVyTG9jYXRpb25Qb3B1cC5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2xvY2F0aW9uLXBvcHVwLS1zaG93Jyk7XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBjb25zdCBoZWFkZXJCdXR0b25Nb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19oYW1idXJnZXItYnRuLW1vYmlsZScpO1xyXG4gICAgY29uc3QgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX25hdmlnYXRpb24tY29udGFpbmVyJyk7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xyXG4gICAgY29uc3Qgc2l0ZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBjb25zdCB0b29nbGVIYW1idXJnZXI9KCkgPT4ge1xyXG4gICAgICAgIGhlYWRlckJ1dHRvbk1vYmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhbmdlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3Qgc2hvd01lbnUgPSAoKSA9PiB7XHJcbiAgICAgICAgbWVudUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XHJcbiAgICAgICAgLyogc2l0ZUJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYm9keV9fbm8tc2Nyb2xsJyk7ICovXHJcbiAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAhIWhlYWRlckJ1dHRvbk1vYmlsZSAmJiBoZWFkZXJCdXR0b25Nb2JpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0b29nbGVIYW1idXJnZXIoKTtcclxuICAgICAgICBzaG93TWVudSgpO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgLyogIGlmKG1lbnVDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcclxuICAgICAgICAgICAgbWFpbi5zdHlsZS5kaXNwbGF5ID0gICdub25lJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtYWluLnN0eWxlLmRpc3BsYXkgPSAgJ2Jsb2NrJztcclxuICAgICAgICB9ICovXHJcbiAgICBcclxuICAgIH0pXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHBvcHVwTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWxpbmtcIik7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xyXG4gICAgICAgIGNvbnN0IGxvY2tQYWRkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sb2NrLXBhZGRpbmdcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHVubG9jayA9IHRydWU7IC8v0YfRgtC+0LHRiyDQvdC1INCx0YvQu9C+INC00LLQvtC50L3Ri9GFINC90LDQttCw0YLQuNC5XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGltZW91dCA9IDgwMDsgLy8g0KLQsNC50LzQsNGD0YIg0YHRgtC+0LjRgiDRgtCw0LrQvtC5INC20LUg0LrQsNC6INGDINCw0L3QuNC80LDRhtC40Lgg0LIg0YHQuNGN0YHRjdGBLiDQrdGC0L4g0YHQstGP0LfQsNC90L4g0YEg0LHQu9C+0LrQuNGA0L7QstC60L7QuSDRgdGC0YDQvtC40LvQsCDQuCDQtdCz0L4g0LDQtNC10LrQstCw0YLQvdC+0Lkg0YDQsNCx0L7RgtC1XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHBvcHVwTGlua3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcHVwTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwTGluayA9IHBvcHVwTGlua3NbaV07XHJcbiAgICAgICAgICAgICAgICBwb3B1cExpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3B1cE5hbWUgPSBwb3B1cExpbmsuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKS5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3B1cE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRQb3B1cClcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cE9wZW4oY3VycmVudFBvcHVwKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcG9wdXBDbG9zZUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb3NlLXBvcHVwXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwb3B1cENsb3NlSWNvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9wdXBDbG9zZUljb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gcG9wdXBDbG9zZUljb25baV07XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UoZWwuY2xvc2VzdChcIi5wb3B1cFwiKSk7IC8vINCa0LvQvtC30LXRgdGCIC0g0Y3RgtC+INCx0LvQuNC20LDQudGI0LjQuSDRgNC+0LTQuNGC0LXQu9GMINGB0YHRi9C70LrQuCDRgSDQutC70LDRgdGB0L7QvCDQv9C+0L/QsNC/LiDQotC+INC10YHRgtGMINCx0YPQtNC10YIg0LfQsNC60YDRi9GCINC/0L7Qv9Cw0L8g0YDRj9C00L7QvCDRgSDQutC70LjQutC90YPRgtC+0Lkg0YHRgdGL0LvQutC+0LksINCwINC90LUg0LrQsNC60L7RhtGC0L4g0LTRgNGD0LPQvtC5LiDQntGCINGB0YHRi9C70LrQuCDRgdC+0LHRi9GC0LjQtSDQstGB0L/Qu9GL0LLRkdGCINC4INGB0YDQsNCx0L7RgtCw0LXRgiDQvdCwINGA0L7QtNC40YLQtdC70LUg0YEg0LrQu9Cw0YHRgdC+0Lwg0L/QvtC/0LDQv1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvL9GE0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y9cclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBwb3B1cE9wZW4oY3VycmVudFBvcHVwKSB7XHJcbiAgICAgICAgICAgIC8v0JLQvdCw0YfQsNC70LUg0L/RgNC+0LLQtdGA0LrQsCDQvdCwINGD0LbQtSDQvtGC0LrRgNGL0YLRi9C1INC/0L7Qv9Cw0L/Riywg0YfRgtC+0LHRiyDQt9Cw0LrRgNGL0YLRjCDQuNGFXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9wdXAgJiYgdW5sb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb3B1cEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAub3BlblwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChwb3B1cEFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UocG9wdXBBY3RpdmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keUxvY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3B1cC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8v0LfQsNC60YDRi9GC0LjQtSDQv9C+INC60LvQuNC60YMg0LLQvdC1INC+0LHQu9Cw0YHRgtC4INC60L7QvdGC0LXQvdGC0LBcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZ0LnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwX19jb250ZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UoZXZ0LnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAvL9Ck0KPQndCa0KbQmNCvINCX0JDQmtCg0KvQotCY0K9cclxuICAgICAgICAvL9CSINC30LDQutGA0YvRgtC40Lgg0LzRiyDQvNC+0LbQtdC8INC/0LXRgNC10LTQsNGC0Ywg0YTQvtC70YEg0LTQu9GPINCx0LvQvtC60LjRgNC+0LLQutC4INCx0L7QtNC4LCDQutC+0LPQtNCwINC80Ysg0L7RgtC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L8g0LIg0L/QvtC/0LDQv9C1XHJcbiAgICAgICAgZnVuY3Rpb24gcG9wdXBDbG9zZShwb3B1cEFjdGl2ZSwgZG9VbmxvY2sgPSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChwb3B1cEFjdGl2ZS5xdWVyeVNlbGVjdG9yKCdmb3JtJykpIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwQWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXNldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIHBvcHVwQWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXNldCgpOyAqL1xyXG4gICAgICAgICAgICBpZiAodW5sb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChkb1VubG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlVbmxvY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBib2R5TG9jaygpIHtcclxuICAgICAgICAgICAgLy/QktC90LDRh9Cw0LvQtSDRg9Cx0LjRgNCw0LXRgiDQv9GA0YvQs9Cw0Y7RidC40Lkg0YHQutGA0L7Qu9C7IHdyYXBwZXIg4oCTINGN0YLQviDQtNC40LIg0LLQvdGD0YLRgNC4INCx0L7QtNC4XHJcbiAgICAgICAgICAgIC8qIGNvbnN0IGxvY2tQYWRkaW5nVmFsdWUgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlclwiKS5vZmZzZXRXaWR0aCArIFwicHhcIjsgKi9cclxuICAgICAgICAgICAgY29uc3QgbG9ja1BhZGRpbmdWYWx1ZSA9IHdpbmRvdy5pbm5lcldpZHRoIC0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cmFwcGVyXCIpLmNsaWVudFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cuaW5uZXJXaWR0aCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlclwiKS5vZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8v0JvQvtC6INC/0Y3QtNC00LjQvdCzINC00L7QsdCw0LLQu9GP0LXRgiDQvtCx0YrQtdC60YLQsNC8INGBINC/0L7Qt9C40YjQvSDRhNC40LrRgdC0LiDQndCw0L/RgNC40LzQtdGAINGF0Y3QtNGN0YAg0YLQsNC60L7QuS4g0J7QvSDRgdCy0LjQtNCz0LDQtdGC0YHRjy4g0JXQvNGDINC90LDQtNC+INGB0YLQuNC70Ywg0L/QvtC00L/RgNCw0LLQuNGC0YwuXHJcbiAgICAgICAgICAgIGlmIChsb2NrUGFkZGluZy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2tQYWRkaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBsb2NrUGFkZGluZ1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBsb2NrUGFkZGluZ1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gbG9ja1BhZGRpbmdWYWx1ZTtcclxuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKFwibG9ja1wiKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgLy/QntC9INC70L7Rh9C40YIg0L3QsCDQstGA0LXQvNGPINGC0LDQudC80LDRg9GC0LAsINC/0L7RgtC+0LzRgyDRh9GC0L4g0L7QutC90L4g0LfQsNC60YDRi9Cy0LDQtdGC0YHRjyA4MDAg0LzRgS4g0Jgg0YfRgtC+0LHRiyDQstC+INCy0YDQtdC80Y8g0LfQsNC60YDRi9GC0LjRjyDQvdC1INC+0YLQutGA0YvRgtGMINCx0YvQu9C+INC+0LrQvdC+INGB0L3QvtCy0LBcclxuICAgICAgICAgICAgdW5sb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdW5sb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8v0L3QtSDQtNC+INC60L7QvdGG0LBcclxuICAgICAgICBmdW5jdGlvbiBib2R5VW5sb2NrKCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsb2NrUGFkZGluZy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NrUGFkZGluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGxvY2tQYWRkaW5nW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9jaycpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdW5sb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdW5sb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgdGltZW91dClcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2dC53aGljaCA9PSAyNykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9wdXBBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLm9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBwb3B1cENsb3NlKHBvcHVwQWN0aXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcblxyXG59KTsiXX0=
