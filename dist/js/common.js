"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".js-hamburger-btn"),t=document.querySelector(".js-hamburger-menu"),o=document.querySelector(".hamburger__back-btn-mobile");document.querySelector(".header__hamburger-btn-mobile.change");e.addEventListener("click",(function(){console.log("click"),t.classList.toggle("hamburger-show")})),o.addEventListener("click",(function(){console.log("click"),t.classList.remove("hamburger-show")})),function(e,t,o,n){var i=document.querySelectorAll(e),r=document.querySelector(o),s=document.querySelectorAll(n);function l(e){for(var t=e;t<s.length;t++)s[t].classList.remove("show"),s[t].classList.add("hide")}l(1),r.addEventListener("click",(function(o){var n,r=o.target;if(console.log(r,!!r.closest(e)),r.closest(t)||r.classList.contains(t))for(var c=0;c<i.length;c++)if(r==i[c]){console.log(i[c]),l(0),s[n=c].classList.contains("hide")&&(s[n].classList.remove("hide"),s[n].classList.add("show"));break}}))}(".hamburger__left-menu-item-link",".hamburger__left-menu-item",".hamburger__left-menu",".hamburger__right-menu-item");var n=document.querySelector(".header__location"),i=document.querySelector(".header__location-popup");n&&n.addEventListener("click",(function(e){e.preventDefault(),i.classList.toggle("header__location-popup--show")}));var r=document.querySelector(".header__hamburger-btn-mobile"),s=document.querySelector(".header__navigation-container");document.querySelector("main"),document.querySelector("body");r&&r.addEventListener("click",(function(e){e.preventDefault(),r.classList.toggle("change"),s.classList.toggle("show"),t.classList.remove("hamburger-show")}));new Swiper(".main__slider-swiper",{direction:"horizontal",loop:!0,navigation:{nextEl:".main__slider-button-next",prevEl:".main__slider-button-prev"}}),new Swiper(".pop-works__slider-swiper",{direction:"horizontal",loop:!0,slidesPerView:3,spaceBetween:24,navigation:{nextEl:".pop-works__slider-button-next",prevEl:".pop-works__slider-button-prev"},breakpoints:{700:{slidesPerView:1,spaceBetween:0},1150:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}}),new Swiper(".new-videos__slider-swiper",{direction:"horizontal",loop:!0,slidesPerView:4,spaceBetween:24,loopAdditionalSlides:3,navigation:{nextEl:".new-videos__slider-button-next",prevEl:".new-videos__slider-button-prev"},breakpoints:{600:{slidesPerView:1.36,spaceBetween:24},800:{slidesPerView:2,spaceBetween:24},1150:{slidesPerView:3,spaceBetween:24}}});var l,c=document.body.clientWidth,a=document.querySelector(".pop-articles__items-swiper"),d=function(){console.log("sliderInit"),l=new Swiper(".pop-articles__items-swiper",{direction:"horizontal",loop:!0,slidesPerView:1.35,spaceBetween:20,loopAdditionalSlides:3}),a.classList.remove("pop-articles--no-swiper")};c<769&&d();window.addEventListener("resize",(function(){var e=document.body.clientWidth;console.log(e),e<769?d():e>=769&&a.classList.contains("swiper-container-initialized")&&(console.log("swiperDestroy"),l.destroy(!0,!0),a.classList.add("pop-articles--no-swiper"))})),console.log(c);var u=document.querySelectorAll(".popup-link"),p=document.querySelector("body"),m=document.querySelectorAll(".lock-padding"),g=!0;if(u.length>0)for(var h=function(e){var t=u[e];t.addEventListener("click",(function(e){var o=t.getAttribute("href").replace("#",""),n=document.getElementById(o);console.log(n),function(e){if(e&&g){var t=document.querySelector(".popup.open");t?y(t,!1):function(){var e=window.innerWidth-document.querySelector(".wrapper").clientWidth+"px";if(console.log(window.innerWidth),console.log(document.querySelector(".wrapper").offsetWidth),m.length>0)for(var t=0;t<m.length;t++){m[t].style.paddingRight=e}p.style.paddingRight=e,p.classList.add("lock"),g=!1,setTimeout((function(){g=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||y(e.target.closest(".popup"))}))}}(n),e.preventDefault()}))},w=0;w<u.length;w++)h(w);var v=document.querySelectorAll(".close-popup");if(v.length>0)for(var f=function(e){var t=v[e];t.addEventListener("click",(function(e){y(t.closest(".popup")),e.preventDefault()}))},_=0;_<v.length;_++)f(_);function y(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.querySelector("form")&&e.querySelector("form").reset(),g&&(e.classList.remove("open"),t&&b())}function b(){setTimeout((function(){if(m.length>0)for(var e=0;e<m.length;e++){m[e].style.paddingRight="0px"}p.style.paddingRight="0px",p.classList.remove("lock")}),800),g=!1,setTimeout((function(){g=!0}),800)}document.addEventListener("keydown",(function(e){27==e.which&&y(document.querySelector(".popup.open"))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW1idXJnZXJCYWNrQnRuIiwicXVlcnlTZWxlY3RvciIsImhhbWJlcmdlckNsb3NlQnRuIiwiY2F0YWxvZ0J1dHRvbiIsImNvbnNvbGUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwibG9nIiwiaGFtYnVyZ2VyTWVudSIsImhpZGVUYWJDb250ZW50IiwicmVtb3ZlIiwiYnV0dG9uIiwiYnV0dG9uQ29udGFpbmVyIiwiYnRuQ29udGFpbmVyIiwidGFiIiwidGFiQnV0dG9uIiwiYnV0dG9uc0NvbnRhaW5lciIsInRhYkNvbnRlbnQiLCJjb250YWlucyIsImFkZCIsImkiLCJhIiwibGVuZ3RoIiwiZXZ0IiwiYiIsInRhcmdldCIsImNsb3Nlc3QiLCJoZWFkZXJMb2NhdGlvbkxpbmsiLCJoZWFkZXJMb2NhdGlvblBvcHVwIiwic2hvd1RhYkNvbnRlbnQiLCJtZW51Q29udGFpbmVyIiwiaGVhZGVyQnV0dG9uTW9iaWxlIiwicHJldmVudERlZmF1bHQiLCJzaG93TWVudSIsImUiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwibmV4dEVsIiwicHJldkVsIiwiZGlyZWN0aW9uIiwibG9vcCIsIm5hdmlnYXRpb24iLCJjbGllbnRXaWR0aCIsIk1BWF9NT0JJTEVfV0lEVEgiLCJzbGlkZXJJbml0IiwicG9wQXJ0aWNsZXNTd2lwZXIiLCIxMTUwIiwiMTQ0MCIsInN3aXBlckRlc3Ryb3kiLCJyZXNpemVIYW5kbGVyU2xpZGVyIiwiNjAwIiwiODAwIiwiYm9keSIsInN3aXBlckNvbnRhaW5lciIsImxvb3BBZGRpdGlvbmFsU2xpZGVzIiwidGltZW91dCIsIndpbmRvdyIsInBvcHVwTGluayIsInBvcHVwTmFtZSIsImN1cnJlbnRQb3B1cCIsInBvcHVwTGlua3MiLCJsb2NrUGFkZGluZyIsInVubG9jayIsIl9sb29wIiwiYm9keUxvY2siLCJnZXRBdHRyaWJ1dGUiLCJyZXBsYWNlIiwiZ2V0RWxlbWVudEJ5SWQiLCJsb2NrUGFkZGluZ1ZhbHVlIiwic2V0VGltZW91dCIsInBhZGRpbmdSaWdodCIsInBvcHVwQ2xvc2UiLCJwb3B1cEFjdGl2ZSIsImlubmVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsInN0eWxlIiwiZWwiLCJwb3B1cENsb3NlSWNvbiIsIl9sb29wMiIsImRvVW5sb2NrIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwicmVzZXQiLCJib2R5VW5sb2NrIiwid2hpY2giXSwibWFwcGluZ3MiOiJhQUVBQSxTQUFTQyxpQkFBaUIsb0JBQW9CLFdBUXpDLElBQU1DLEVBQW1CRixTQUFTRyxjQUFjLHFCQUMxQ0MsRUFBb0JKLFNBQVNHLGNBQWMsc0JBRS9DRSxFQUFnQkEsU0FBY0osY0FBaUIsK0JBQ2hERCxTQUFBRyxjQUFBLHdDQURERSxFQUFBSixpQkFBQSxTQUFBLFdBVUVDLFFBQUFBLElBQUFBLFNBQ0RJLEVBQVlDLFVBQVpDLE9BQUEscUJBWW1CUixFQUFTUyxpQkFGMUIsU0FBQSxXQVZGSCxRQUFRSSxJQUFJLFNBY1ZDLEVBQVNDLFVBQVRDLE9BQTRCLHFCQVBoQyxTQUFvQkMsRUFBUUMsRUFBaUJDLEVBQWNDLEdBR3ZELElBQUlDLEVBQVlsQixTQUFTUyxpQkFBaUJLLEdBZTFDSyxFQUE0Qm5CLFNBQUFHLGNBQUFhLEdBQ3BCSSxFQUFjYixTQUFVYyxpQkFBNUJKLEdBRUlHLFNBQUFBLEVBQXdCRSxHQUMzQixJQUFBLElBQUFDLEVBQUFDLEVBQUFELEVBQUFILEVBQUFLLE9BQUFGLElBR0xILEVBQUFHLEdBQUFoQixVQUFBTSxPQUFBLFFBZlFPLEVBQVdHLEdBQUdoQixVQUFVZSxJQUFJLFFBS3BDVixFQUFlLEdBV2ZPLEVBQUFsQixpQkFBQSxTQUFBLFNBQUF5QixHQWlCQyxJQVprQ0MsRUFZbENDLEVBQUFGLEVBQUFFLE9BR1MsR0FsQlp0QixRQUFRSSxJQUFJa0IsSUFBVUEsRUFBT0MsUUFBUWYsSUFrQnpC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QUFBLFNBRVVSLEdBQ05uRSxJQUFMeUUsRUFBbUJDLEVBRW5CMUQsR0FyRUl5RCxFQUFHL0UsaUJBQWlCLFNBQVMsU0FBVXlCLEdBc0UzQ2lELEVBQUFLLEVBQUFuRCxRQUFBLFdBQ1dILEVBQUFTLHFCQUxBdUMsRUFBQUEsRUFBWG5ELEVBQTBCaUQsRUFBMUIvQyxPQUFBRixJQUFBMkQsRUFBV1IsR0FuZ0J2QixTQUFBQyxFQUFBQyxHQUFBLElBQUFPLElBQUFDLFVBQUEzRCxPQUFBLFFBQUE0RCxJQUFBRCxVQUFBLEtBQUFBLFVBQUEsR0FrZWdCUixFQUFZekUsY0FBYyxTQUMxQnlFLEVBQVl6RSxjQUFjLFFBQVFtRixRQUdsQ3BCLElBQ0FVLEVBQVlyRSxVQUFVTSxPQUFPLFFBQ3pCc0UsR0FDQUksS0FzQ1osU0FBU0EsSUFDTGQsWUFBVyxXQUNQLEdBQUlSLEVBQVl4QyxPQUFTLEVBQ3JCLElBQUssSUFBSUYsRUFBSSxFQUFHQSxFQUFJMEMsRUFBWXhDLE9BQVFGLElBQUssQ0FDOUIwQyxFQUFZMUMsR0FDcEJ3RCxNQUFNTCxhQUFlLE1BR2hDbEIsRUFBS3VCLE1BQU1MLGFBQWUsTUFDMUJsQixFQUFLakQsVUFBVU0sT0FBTyxVQS9DUixLQWtEbEJxRCxHQUFTLEVBQ1RPLFlBQVcsV0FDUFAsR0FBUyxJQXBESyxLQXdEdEJsRSxTQUFTQyxpQkFBaUIsV0FBVyxTQUFVeUIsR0FDMUIsSUFBYkEsRUFBSThELE9BRUpiLEVBRG9CM0UsU0FBU0csY0FBYyIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLz09PT09PT18ICAgSU1QT1JUU1xyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBcclxuICAgIFx0Y29uc3QgY2F0YWxvZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1oYW1idXJnZXItYnRuJyk7XHJcbiAgICBcdGNvbnN0IGhhbWJ1cmdlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaGFtYnVyZ2VyLW1lbnUnKTtcclxuICAgIFx0Y29uc3QgaGFtYnVyZ2VyQmFja0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJnZXJfX2JhY2stYnRuLW1vYmlsZScpO1xyXG4gICAgXHRjb25zdCBoYW1iZXJnZXJDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2hhbWJ1cmdlci1idG4tbW9iaWxlLmNoYW5nZScpO1xyXG4gICAgXHRcclxuICAgIFx0ISFjYXRhbG9nQnV0dG9uICYgY2F0YWxvZ0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIFx0XHRjb25zb2xlLmxvZygnY2xpY2snKVxyXG4gICAgXHRcdGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnaGFtYnVyZ2VyLXNob3cnKTtcclxuICAgIFxyXG4gICAgXHRcclxuICAgIFx0XHJcbiAgICBcdH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFx0XHJcbiAgICBcdCEhaGFtYnVyZ2VyQmFja0J0biAmIGhhbWJ1cmdlckJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBcdFx0Y29uc29sZS5sb2coJ2NsaWNrJylcclxuICAgIFx0XHRoYW1idXJnZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hhbWJ1cmdlci1zaG93Jyk7XHJcbiAgICBcdH0pO1xyXG4gICAgXHJcbiAgICBcdFxyXG4gICAgXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRhYk1vZHVsZSAoYnV0dG9uLCBidXR0b25Db250YWluZXIsIGJ0bkNvbnRhaW5lciwgdGFiKSB7XHJcbiAgICBcclxuICAgICAgICAvL9C90YPQttC90L4g0L3QsNC50YLQuCDQutC90L7Qv9C60LgsINCx0LvQvtC6INC60L7QvdGC0LXQvdGC0LAg0Lgg0LHQu9C+0LogYyDQutC90L7Qv9C60LDQvNC4XHJcbiAgICAgICAgbGV0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYnV0dG9uKSxcclxuICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnRuQ29udGFpbmVyKSxcclxuICAgICAgICAgICAgdGFiQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFiKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGVUYWJDb250ZW50IChhKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBhOyBpPCB0YWJDb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJDb250ZW50W2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgIHRhYkNvbnRlbnRbaV0uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy/RgdC60YDRi9Cy0LDQtdC8INCy0YHQtSDRgtCw0LHRiywg0LrRgNC+0LzQtSDQv9C10YDQstC+0LPQvlxyXG4gICAgICAgIGhpZGVUYWJDb250ZW50KDEpO1xyXG4gICAgXHJcbiAgICAgICAgLy/Qv9C+0LrQsNC3INC+0L/RgNC10LTQtdC70LXQvdC90L7Qs9C+INGC0LDQsdCwXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd1RhYkNvbnRlbnQgKGIpIHtcclxuICAgICAgICAgICAgaWYgKHRhYkNvbnRlbnRbYl0uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpIHtcclxuICAgICAgICAgICAgICAgIHRhYkNvbnRlbnRbYl0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgdGFiQ29udGVudFtiXS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LBcclxuICAgICAgICBidXR0b25zQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcclxuICAgIFx0XHRjb25zb2xlLmxvZyh0YXJnZXQsICEhdGFyZ2V0LmNsb3Nlc3QoYnV0dG9uKSlcclxuICAgICAgICAgICAgaWYodGFyZ2V0LmNsb3Nlc3QoYnV0dG9uQ29udGFpbmVyKXx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoYnV0dG9uQ29udGFpbmVyKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGk8dGFiQnV0dG9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PSB0YWJCdXR0b25baV0pIHtcclxuICAgIFx0XHRcdFx0XHRjb25zb2xlLmxvZyh0YWJCdXR0b25baV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVUYWJDb250ZW50KDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VGFiQ29udGVudChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBcclxuICAgICAgICB0YWJNb2R1bGUoJy5oYW1idXJnZXJfX2xlZnQtbWVudS1pdGVtLWxpbmsnLCAnLmhhbWJ1cmdlcl9fbGVmdC1tZW51LWl0ZW0nLCAnLmhhbWJ1cmdlcl9fbGVmdC1tZW51JywgJy5oYW1idXJnZXJfX3JpZ2h0LW1lbnUtaXRlbScpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHRjb25zdCBoZWFkZXJMb2NhdGlvbkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19sb2NhdGlvbicpO1xyXG4gICAgY29uc3QgaGVhZGVyTG9jYXRpb25Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvY2F0aW9uLXBvcHVwJyk7XHJcbiAgICBcclxuICAgICEhaGVhZGVyTG9jYXRpb25MaW5rICYmIGhlYWRlckxvY2F0aW9uTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGhlYWRlckxvY2F0aW9uUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19sb2NhdGlvbi1wb3B1cC0tc2hvdycpO1xyXG4gICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgY29uc3QgaGVhZGVyQnV0dG9uTW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faGFtYnVyZ2VyLWJ0bi1tb2JpbGUnKTtcclxuICAgIGNvbnN0IG1lbnVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19uYXZpZ2F0aW9uLWNvbnRhaW5lcicpO1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcclxuICAgIGNvbnN0IHNpdGVCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgY29uc3QgdG9vZ2xlSGFtYnVyZ2VyPSgpID0+IHtcclxuICAgICAgICBoZWFkZXJCdXR0b25Nb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IHNob3dNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIG1lbnVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG4gICAgICAgIC8qIHNpdGVCb2R5LmNsYXNzTGlzdC50b2dnbGUoJ2JvZHlfX25vLXNjcm9sbCcpOyAqL1xyXG4gICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgISFoZWFkZXJCdXR0b25Nb2JpbGUgJiYgaGVhZGVyQnV0dG9uTW9iaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdG9vZ2xlSGFtYnVyZ2VyKCk7XHJcbiAgICAgICAgc2hvd01lbnUoKTtcclxuICAgIFxyXG4gICAgXHRoYW1idXJnZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hhbWJ1cmdlci1zaG93Jyk7XHJcbiAgICBcclxuICAgIFx0ICAvKiAgaWYobWVudUNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xyXG4gICAgICAgICAgICBtYWluLnN0eWxlLmRpc3BsYXkgPSAgJ25vbmUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1haW4uc3R5bGUuZGlzcGxheSA9ICAnYmxvY2snO1xyXG4gICAgICAgIH0gKi9cclxuICAgIFxyXG4gICAgXHRcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIH0pXHJcbiAgICBcclxuICAgIC8qIFx0Y29uc3QgbW9iaWxlQ2F0YWxvZ0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJlci1idG4tLW1vYmlsZScpO1xyXG4gICAgXHQhIW1vYmlsZUNhdGFsb2dCdG4gJiBtb2JpbGVDYXRhbG9nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgXHRcdGNvbnNvbGUubG9nKCdjbGljaycpXHJcbiAgICBcdFx0aGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QudG9nZ2xlKCcubW9iaWxlLW1lbnUtLXNob3cgJyk7XHJcbiAgICBcdH0pXHJcbiAgICAgKi9cclxuICAgIFxyXG4gICAgXHJcbiAgICAvKiBcdGNvbnN0IGxlZnRNZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGFtYnVyZ2VyX19sZWZ0LW1lbnUtaXRlbScpXHJcbiAgICBcdGNvbnN0IHJpZ2h0TWVudUNvbnRhaW5lckl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhhbWJ1cmdlcl9fcmlnaHQtbWVudS1pdGVtJylcclxuICAgIFxyXG4gICAgXHRjb25zdCBoaWRlUmlnaHRNZW51SXRlbXMgPSAoKSA9PiB7XHJcbiAgICBcdFx0cmlnaHRNZW51Q29udGFpbmVySXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIFx0XHRcdGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIFx0XHR9KVxyXG4gICAgXHR9XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHRsZWZ0TWVudUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICBcdFx0aXRlbS5xdWVyeVNlbGVjdG9yKCdhJykuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGUpID0+IHtcclxuICAgIFx0XHRcdGhpZGVSaWdodE1lbnVJdGVtcygpO1xyXG4gICAgXHRcdFx0bGV0IGluZGV4ID0gZS50YXJnZXQuaHJlZjtcclxuICAgIFx0XHRcdGNvbnNvbGUubG9nKGluZGV4KVxyXG4gICAgXHJcbiAgICBcdFx0fSlcclxuICAgIFx0fSlcclxuICAgIFx0bGVmdE1lbnVJdGVtc1swXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3QnKTtcclxuICAgIFx0cmlnaHRNZW51Q29udGFpbmVySXRlbXNbMF0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcdC8qXHJcbiAgICBcdCQoJy50YWItbmF2IGEnKS5tb3VzZW92ZXIoZnVuY3Rpb24oKXsgXHJcbiAgICBcdCAgJCgnLnRhYi1wYW5lbHM+ZGl2JykuaGlkZSgpLmZpbHRlcih0aGlzLmhhc2gpLnNob3coKTtcclxuICAgIFx0ICAkKCcudGFiLW5hdiBsaScpLnJlbW92ZUNsYXNzKCdzZWxlY3QnKTsgXHJcbiAgICBcdCAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnc2VsZWN0Jyk7XHJcbiAgICBcdCAgcmV0dXJuIChmYWxzZSk7XHJcbiAgICBcdH0pXHJcbiAgICAgICAqL1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAvKiBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcdGNvbnN0IGNhdGFsb2dCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaGFtYnVyZ2VyLWJ0bicpO1xyXG4gICAgXHRjb25zdCBoYW1idXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWhhbWJ1cmdlci1tZW51Jyk7XHJcbiAgICBcdFxyXG4gICAgXHQhIWNhdGFsb2dCdXR0b24gJiBjYXRhbG9nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgXHRcdGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnaGFtYnVyZ2VyLXNob3cnKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcdFx0Y29uc3QgbGVmdE1lbnVTd2lwZXIgPSBuZXcgU3dpcGVyKCcuaGFtYnVyZ2VyX19sZWZ0LW1lbnUnLCB7XHJcbiAgICBcdFx0XHRkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICBcdFx0XHRzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgXHRcdCAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgIFx0XHQgICBhbGxvd1RvdWNoTW92ZTogZmFsc2UsXHJcbiAgICBcdFx0ICBsb29wOiBmYWxzZSxcclxuICAgIFx0XHQgIHNsaWRlQWN0aXZlQ2xhc3M6ICdzd2lwZXItc2xpZGUtYWN0aXZlJyxcclxuICAgIFx0XHQgICBcdCBcclxuICAgIFx0XHQgICBzY3JvbGxiYXI6IHtcclxuICAgIFx0XHRcdCBlbDogJy5zd2lwZXItc2Nyb2xsYmFyJyxcclxuICAgIFx0XHRcdCBkcmFnZ2FibGU6IHRydWUsXHJcbiAgICBcdFx0XHQgaGlkZTogdHJ1ZSxcclxuICAgIFx0XHQgICB9LFxyXG4gICAgXHJcbiAgICBcclxuICAgIFx0XHQgICBcclxuICAgIFx0XHQgfSk7XHJcbiAgICBcclxuICAgIFx0XHRcclxuICAgIFx0XHQgY29uc3QgbGVmdFN3aXBlclNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oYW1idXJnZXJfX2xlZnQtbWVudSAuc3dpcGVyLXdyYXBwZXIgLnN3aXBlci1zbGlkZScpO1xyXG4gICAgXHRcdCBsZWZ0TWVudVN3aXBlci5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgXHRcdFx0bGVmdFN3aXBlclNsaWRlcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgXHRcdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXBlci1zbGlkZS1hY3RpdmUnKTtcclxuICAgIFx0XHRcdH0pXHJcbiAgICBcdFx0XHQgbGV0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgXHRcdFx0IHRhcmdldC5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGUtYWN0aXZlJylcclxuICAgIFx0XHQgIH0pO1xyXG4gICAgXHJcbiAgICBcdFx0ICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHRcdCBcclxuICAgIFx0IFxyXG4gICAgXHRcdCBjb25zdCByaWdodE1lbnVTd2lwZXIgPSBuZXcgU3dpcGVyKCcuaGFtYnVyZ2VyX19yaWdodC1tZW51Jywge1xyXG4gICAgXHRcdCAgIFxyXG4gICAgXHRcdCAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBcdFx0ICAgc3BhY2VCZXR3ZWVuOiA1MCxcclxuICAgIFx0XHQgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICBcdFx0ICAgYWxsb3dUb3VjaE1vdmU6IGZhbHNlLFxyXG4gICAgXHRcdFx0IGxvb3A6IGZhbHNlLFxyXG4gICAgXHRcdFx0IHRodW1iczoge1xyXG4gICAgXHRcdFx0IHN3aXBlcjogbGVmdE1lbnVTd2lwZXIsXHJcbiAgICBcdFx0XHQgfSxcclxuICAgIFx0IFxyXG4gICAgXHQgXHJcbiAgICBcdCBcclxuICAgIFx0XHQgfSk7XHJcbiAgICBcdH0pXHJcbiAgICBcdFxyXG4gICAgXHJcbiAgICBcclxuICAgIFx0XHJcbiAgICBcdFxyXG4gICAgXHQgKi9cclxuICAgIGNvbnN0IG1haW5TbGlkZXJzd2lwZXIgPSBuZXcgU3dpcGVyKCcubWFpbl9fc2xpZGVyLXN3aXBlcicsIHtcclxuICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgXHJcbiAgICBcclxuICAgICAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgIG5leHRFbDogJy5tYWluX19zbGlkZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgcHJldkVsOiAnLm1haW5fX3NsaWRlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIH0pO1xyXG4gICAgY29uc3QgcG9wV29ya3NTd2lwZXIgPSBuZXcgU3dpcGVyKCcucG9wLXdvcmtzX19zbGlkZXItc3dpcGVyJywge1xyXG4gICAgICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnNcclxuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgXHJcbiAgICAgICAgLy8gRGVmYXVsdCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDI0LFxyXG4gICAgICAgXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICBuZXh0RWw6ICcucG9wLXdvcmtzX19zbGlkZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgcHJldkVsOiAnLnBvcC13b3Jrc19fc2xpZGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzID49IDQxNHhcclxuICAgICAgICAgIDcwMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgLy8gd2hlbiB3aW5kb3cgd2lkdGggaXMgPj0gNDgwcHhcclxuICAgICAgICAgIDExNTA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNCxcclxuICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgMTQ0MDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDI0LFxyXG4gICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgfSk7XHJcbiAgICBjb25zdCBuZXdWaWRlb3NTd2lwZXIgPSBuZXcgU3dpcGVyKCcubmV3LXZpZGVvc19fc2xpZGVyLXN3aXBlcicsIHtcclxuICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjQsXHJcbiAgICAgICAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICBuZXh0RWw6ICcubmV3LXZpZGVvc19fc2xpZGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgIHByZXZFbDogJy5uZXctdmlkZW9zX19zbGlkZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAvLyB3aGVuIHdpbmRvdyB3aWR0aCBpcyA+PSA0MTRcclxuICAgICAgICAgIDYwMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLjM2LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDI0XHJcbiAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICA4MDA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzID49IDEwMDBcclxuICAgICAgICAgIDExNTA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNFxyXG4gICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIH0pO1xyXG4gICAgbGV0IHsgY2xpZW50V2lkdGggfSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICBjb25zdCBzd2lwZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wLWFydGljbGVzX19pdGVtcy1zd2lwZXInKTtcclxuICAgIGxldCBwb3BBcnRpY2xlc1N3aXBlcjtcclxuICAgIGNvbnN0IE1BWF9NT0JJTEVfV0lEVEggPSA3Njk7XHJcbiAgICBcclxuICAgIGNvbnN0IHNsaWRlckluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NsaWRlckluaXQnKVxyXG4gICAgICAgIHBvcEFydGljbGVzU3dpcGVyICA9IG5ldyBTd2lwZXIoJy5wb3AtYXJ0aWNsZXNfX2l0ZW1zLXN3aXBlcicsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS4zNSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDNcclxuICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgXHJcbiAgICAgIHN3aXBlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdwb3AtYXJ0aWNsZXMtLW5vLXN3aXBlcicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBzd2lwZXJEZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzd2lwZXJEZXN0cm95JylcclxuICAgICAgICBwb3BBcnRpY2xlc1N3aXBlci5kZXN0cm95KHRydWUsIHRydWUpXHJcbiAgICAgICAgc3dpcGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3BvcC1hcnRpY2xlcy0tbm8tc3dpcGVyJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKGNsaWVudFdpZHRoPCBNQVhfTU9CSUxFX1dJRFRIKSB7XHJcbiAgICAgICAgc2xpZGVySW5pdCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCByZXNpemVIYW5kbGVyU2xpZGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCB7IGNsaWVudFdpZHRoIH0gPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNsaWVudFdpZHRoKTtcclxuICAgICAgICBpZiAoY2xpZW50V2lkdGg8IE1BWF9NT0JJTEVfV0lEVEgpIHtcclxuICAgICAgICAgICAgc2xpZGVySW5pdCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2xpZW50V2lkdGggPj0gTUFYX01PQklMRV9XSURUSCAmJiBzd2lwZXJDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItY29udGFpbmVyLWluaXRpYWxpemVkJykpIHtcclxuICAgIFxyXG4gICAgICAgICAgICBzd2lwZXJEZXN0cm95KCk7IFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUhhbmRsZXJTbGlkZXIpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhjbGllbnRXaWR0aCk7XHJcbiAgICAvKiBjb25zdCBoZWFkZXJMb2NhdGlvbkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19sb2NhdGlvbicpO1xyXG4gICAgY29uc3QgaGVhZGVyTG9jYXRpb25Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvY2F0aW9uLXBvcHVwJyk7XHJcbiAgICBcclxuICAgICEhaGVhZGVyTG9jYXRpb25MaW5rICYmIGhlYWRlckxvY2F0aW9uTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGhlYWRlckxvY2F0aW9uUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19sb2NhdGlvbi1wb3B1cC0tc2hvdycpO1xyXG4gICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgY29uc3QgaGVhZGVyQnV0dG9uTW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faGFtYnVyZ2VyLWJ0bi1tb2JpbGUnKTtcclxuICAgIGNvbnN0IG1lbnVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19uYXZpZ2F0aW9uLWNvbnRhaW5lcicpO1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcclxuICAgIGNvbnN0IHNpdGVCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgY29uc3QgdG9vZ2xlSGFtYnVyZ2VyPSgpID0+IHtcclxuICAgICAgICBoZWFkZXJCdXR0b25Nb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IHNob3dNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIG1lbnVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG4gICAgICBcclxuICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICEhaGVhZGVyQnV0dG9uTW9iaWxlICYmIGhlYWRlckJ1dHRvbk1vYmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRvb2dsZUhhbWJ1cmdlcigpO1xyXG4gICAgICAgIHNob3dNZW51KCk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICBcclxuICAgIFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAqL1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBjb25zdCBwb3B1cExpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cC1saW5rXCIpO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcclxuICAgICAgICBjb25zdCBsb2NrUGFkZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubG9jay1wYWRkaW5nXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB1bmxvY2sgPSB0cnVlOyAvL9GH0YLQvtCx0Ysg0L3QtSDQsdGL0LvQviDQtNCy0L7QudC90YvRhSDQvdCw0LbQsNGC0LjQuVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSA4MDA7IC8vINCi0LDQudC80LDRg9GCINGB0YLQvtC40YIg0YLQsNC60L7QuSDQttC1INC60LDQuiDRgyDQsNC90LjQvNCw0YbQuNC4INCyINGB0LjRjdGB0Y3RgS4g0K3RgtC+INGB0LLRj9C30LDQvdC+INGBINCx0LvQvtC60LjRgNC+0LLQutC+0Lkg0YHRgtGA0L7QuNC70LAg0Lgg0LXQs9C+INCw0LTQtdC60LLQsNGC0L3QvtC5INGA0LDQsdC+0YLQtVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwb3B1cExpbmtzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3B1cExpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb3B1cExpbmsgPSBwb3B1cExpbmtzW2ldO1xyXG4gICAgICAgICAgICAgICAgcG9wdXBMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9wdXBOYW1lID0gcG9wdXBMaW5rLmdldEF0dHJpYnV0ZShcImhyZWZcIikucmVwbGFjZShcIiNcIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50UG9wdXApXHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBPcGVuKGN1cnJlbnRQb3B1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHBvcHVwQ2xvc2VJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jbG9zZS1wb3B1cFwiKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocG9wdXBDbG9zZUljb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcHVwQ2xvc2VJY29uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IHBvcHVwQ2xvc2VJY29uW2ldO1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cENsb3NlKGVsLmNsb3Nlc3QoXCIucG9wdXBcIikpOyAvLyDQmtC70L7Qt9C10YHRgiAtINGN0YLQviDQsdC70LjQttCw0LnRiNC40Lkg0YDQvtC00LjRgtC10LvRjCDRgdGB0YvQu9C60Lgg0YEg0LrQu9Cw0YHRgdC+0Lwg0L/QvtC/0LDQvy4g0KLQviDQtdGB0YLRjCDQsdGD0LTQtdGCINC30LDQutGA0YvRgiDQv9C+0L/QsNC/INGA0Y/QtNC+0Lwg0YEg0LrQu9C40LrQvdGD0YLQvtC5INGB0YHRi9C70LrQvtC5LCDQsCDQvdC1INC60LDQutC+0YbRgtC+INC00YDRg9Cz0L7QuS4g0J7RgiDRgdGB0YvQu9C60Lgg0YHQvtCx0YvRgtC40LUg0LLRgdC/0LvRi9Cy0ZHRgiDQuCDRgdGA0LDQsdC+0YLQsNC10YIg0L3QsCDRgNC+0LTQuNGC0LXQu9C1INGBINC60LvQsNGB0YHQvtC8INC/0L7Qv9Cw0L9cclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/RhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPXHJcbiAgICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcG9wdXBPcGVuKGN1cnJlbnRQb3B1cCkge1xyXG4gICAgICAgICAgICAvL9CS0L3QsNGH0LDQu9C1INC/0YDQvtCy0LXRgNC60LAg0L3QsCDRg9C20LUg0L7RgtC60YDRi9GC0YvQtSDQv9C+0L/QsNC/0YssINGH0YLQvtCx0Ysg0LfQsNC60YDRi9GC0Ywg0LjRhVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFBvcHVwICYmIHVubG9jaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9wdXBBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLm9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9wdXBBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cENsb3NlKHBvcHVwQWN0aXZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlMb2NrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9wdXAuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL9C30LDQutGA0YvRgtC40LUg0L/QviDQutC70LjQutGDINCy0L3QtSDQvtCx0LvQsNGB0YLQuCDQutC+0L3RgtC10L3RgtCwXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2dC50YXJnZXQuY2xvc2VzdChcIi5wb3B1cF9fY29udGVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cENsb3NlKGV2dC50YXJnZXQuY2xvc2VzdChcIi5wb3B1cFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/QpNCj0J3QmtCm0JjQryDQl9CQ0JrQoNCr0KLQmNCvXHJcbiAgICAgICAgLy/QkiDQt9Cw0LrRgNGL0YLQuNC4INC80Ysg0LzQvtC20LXQvCDQv9C10YDQtdC00LDRgtGMINGE0L7Qu9GBINC00LvRjyDQsdC70L7QutC40YDQvtCy0LrQuCDQsdC+0LTQuCwg0LrQvtCz0LTQsCDQvNGLINC+0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/INCyINC/0L7Qv9Cw0L/QtVxyXG4gICAgICAgIGZ1bmN0aW9uIHBvcHVwQ2xvc2UocG9wdXBBY3RpdmUsIGRvVW5sb2NrID0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAocG9wdXBBY3RpdmUucXVlcnlTZWxlY3RvcignZm9ybScpKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cEFjdGl2ZS5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBwb3B1cEFjdGl2ZS5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVzZXQoKTsgKi9cclxuICAgICAgICAgICAgaWYgKHVubG9jaykge1xyXG4gICAgICAgICAgICAgICAgcG9wdXBBY3RpdmUuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9VbmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBib2R5VW5sb2NrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24gYm9keUxvY2soKSB7XHJcbiAgICAgICAgICAgIC8v0JLQvdCw0YfQsNC70LUg0YPQsdC40YDQsNC10YIg0L/RgNGL0LPQsNGO0YnQuNC5INGB0LrRgNC+0LvQuyB3cmFwcGVyIOKAkyDRjdGC0L4g0LTQuNCyINCy0L3Rg9GC0YDQuCDQsdC+0LTQuFxyXG4gICAgICAgICAgICAvKiBjb25zdCBsb2NrUGFkZGluZ1ZhbHVlID0gd2luZG93LmlubmVyV2lkdGggLSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyYXBwZXJcIikub2Zmc2V0V2lkdGggKyBcInB4XCI7ICovXHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2tQYWRkaW5nVmFsdWUgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlclwiKS5jbGllbnRXaWR0aCArIFwicHhcIjtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2cod2luZG93LmlubmVyV2lkdGgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyYXBwZXJcIikub2Zmc2V0V2lkdGgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAvL9Cb0L7QuiDQv9GN0LTQtNC40L3QsyDQtNC+0LHQsNCy0LvRj9C10YIg0L7QsdGK0LXQutGC0LDQvCDRgSDQv9C+0LfQuNGI0L0g0YTQuNC60YHQtC4g0J3QsNC/0YDQuNC80LXRgCDRhdGN0LTRjdGAINGC0LDQutC+0LkuINCe0L0g0YHQstC40LTQs9Cw0LXRgtGB0Y8uINCV0LzRgyDQvdCw0LTQviDRgdGC0LjQu9GMINC/0L7QtNC/0YDQsNCy0LjRgtGMLlxyXG4gICAgICAgICAgICBpZiAobG9ja1BhZGRpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NrUGFkZGluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gbG9ja1BhZGRpbmdbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ1JpZ2h0ID0gbG9ja1BhZGRpbmdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IGxvY2tQYWRkaW5nVmFsdWU7XHJcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChcImxvY2tcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8v0J7QvSDQu9C+0YfQuNGCINC90LAg0LLRgNC10LzRjyDRgtCw0LnQvNCw0YPRgtCwLCDQv9C+0YLQvtC80YMg0YfRgtC+INC+0LrQvdC+INC30LDQutGA0YvQstCw0LXRgtGB0Y8gODAwINC80YEuINCYINGH0YLQvtCx0Ysg0LLQviDQstGA0LXQvNGPINC30LDQutGA0YvRgtC40Y8g0L3QtSDQvtGC0LrRgNGL0YLRjCDQsdGL0LvQviDQvtC60L3QviDRgdC90L7QstCwXHJcbiAgICAgICAgICAgIHVubG9jayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVubG9jayA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAvL9C90LUg0LTQviDQutC+0L3RhtCwXHJcbiAgICAgICAgZnVuY3Rpb24gYm9keVVubG9jaygpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9ja1BhZGRpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9ja1BhZGRpbmcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBsb2NrUGFkZGluZ1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMHB4XCI7XHJcbiAgICAgICAgICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvY2snKTtcclxuICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHVubG9jayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVubG9jayA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChldnQud2hpY2ggPT0gMjcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC5vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgcG9wdXBDbG9zZShwb3B1cEFjdGl2ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG5cclxufSk7Il19
